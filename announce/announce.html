<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enter-공지사항</title>
	<!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" />
	<!-- Google Fonts Roboto -->
    <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
    />
   
	<link rel="stylesheet" href="announce.css">
    <link rel="stylesheet" href="checkbox.css">
    <link rel="stylesheet" href="..\css\jquery.accordion.css">
    <link rel="stylesheet" href="demo.css">
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.css" rel="stylesheet">
    <style>

.accordion{
  width: 100%;
  float: left;
  font-size: 22px;
  
}
.click2edit p{
  margin-bottom: 0px!important;
}
.accordion-title {
  background-color: #fff;
  color: #060b11;
  width: 100%;
  float: left;
  padding-top: 5px;
  padding-left: 5%;
  padding-right: 5%;
  margin-top: 5px;
  height: 80px;
  border-bottom: 1px solid #c9c9c9;
}
.accordion-title.active .rotate {
  -ms-transform: rotate(-180deg); 
  transform: rotate(180deg);
}
.accordion-content {
  display: none;
  background-color: #f9f9f9;
  float: left;
  width: 100%;
  padding: 20px;
  font-size: 18px;
  padding-left: 5%;
  padding-right: 5%;
}
@media(max-width: 576px){
  .accordion{
    font-size: 16px;
  }
  .accordion-content{
    font-size: 14px;
  }
}
      
      th{
        font-weight: 700 !important;
      }
      .nav-tabs .nav-link{
        padding: 17px 0px!important;
      }
		@media(max-width: 768px){
      .title{
        align-self: flex-start;
      }
    }
		a.active.tabcolor{color: #186aff!important;border-bottom: solid #186aff!important;}
	.nav-title{
		color: #fff;
	}
    
.form-control:focus {
  border-color: transparent !important;
  box-shadow: inset 0 0 0 1px transparent;
}
.input-group-lg>.form-control{
    
    font-size: 24px !important;
}
.input-group-lg>.form-control::placeholder{
  color: #bfbfbf;
}
.form-control::placeholder{
  color: #bfbfbf!important;
}
.form-outline .form-control{
  padding:12px 24px !important;
  border-radius: 100px!important;
}
.form-outline .form-control::placeholder{
  color: #bfbfbf;
}
.form-outline .form-control~.form-label{
  left: 24px!important;
  top: 6px !important;
  color: #bfbfbf!important;
  
}
@media(max-width: 576px){
  .form-control::placeholder{
    font-size: 18px;
  }
  .card-body{
    height: 42px;
  }
  .input-group-lg{
    top: -10px;
  }
}
.send-button{
  padding: 0px 20px;
}
@media(max-width: 576px){
  .col-4{
    padding: 5px!important;
  }
  .col-8{
    padding: 5px!important;
  }
}
    </style>
	 <link rel="stylesheet" href="../css/mdb.min.css" />
	 <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
	 <script  src="https://code.jquery.com/jquery-latest.min.js"></script>
	 <script>
		 $(document).ready(function(){
        $("#footer").load("../footer.html");
      });
	 </script>
</head>
<body style="min-height: 100vh;">
    <div id="navbar"></div>
	  <nav id="navOption" class="sticky-nav">
		  <div class="container">
			<ul class="nav nav-tabs d-flex mobile-middle" id="ex1" role="tablist" style="border-bottom: 1px solid #fff;">
				<li class="nav-item" role="presentation" style="max-width: 33%;width: 150px">
				  <a
					class="nav-link active text-center tabcolor"
					id="ex1-tab-1"
					data-toggle="tab"
					data-mdb-toggle="tab"
					href="#ex1-tabs-1"
					role="tab"
					aria-controls="ex1-tabs-1"
					aria-selected="true"
					style="font-size: 16px; font-weight: 900;"
					>공지사항</a
				  >
				</li>
				<li class="nav-item" role="presentation" style="max-width: 33%;width: 150px">
				  <a
					class="nav-link text-center tabcolor"
					id="ex1-tab-2"
					data-mdb-toggle="tab"
					data-toggle="tab"
					href="#ex1-tabs-2"
					role="tab"
					aria-controls="ex1-tabs-2"
					aria-selected="false"
					style="font-size: 16px; font-weight: 900;"
					>도움말</a
				  >
				  
				</li>
                <li class="nav-item" role="presentation" style="max-width: 33%;width: 150px">
                    <a
                      class="nav-link text-center tabcolor"
                      id="ex1-tab-2"
                      data-mdb-toggle="tab"
                      data-toggle="tab"
                      href="#ex1-tabs-3"
                      role="tab"
                      aria-controls="ex1-tabs-3"
                      aria-selected="false"
                      style="font-size: 16px; font-weight: 900;"
                      >문의사항</a
                    >
                    
                  </li>
				
			  </ul>
		  </div>
		
	  </nav>
      <div class="tab-content" id="ex1-content" style="min-height: 100vh;">
        <div
        class="tab-pane fade show active"
        id="ex1-tabs-1"
        role="tabpanel"
        aria-labelledby="ex1-tab-1"
      >
      <div class="container-fluid bg-announce d-flex align-items-center announce-height" style="margin-top: 113px;">
        <div class="container col-xxl-4 col-xl-5 col-lg-6 col-md-8 d-flex justify-content-center align-items-center" style="height: 100%;flex-direction: column;">
                <p class="title mb-5 mt-5">
                    공지사항
                </p>
                <div class="card mb-2"
              style="border-radius: 10em; width: 100%;">
              <div class="card-body p-2">
                <div class="input-group input-group-lg">
                  <input type="text" id="searchWord" class="form-control form-control-lg rounde bg-transparent" style="border: 0px !important;"
                    placeholder="검색어를 입력하세요" aria-label="Type Keywords" aria-describedby="basic-addon2" />
                  <span class="input-group-text border-0" id="basic-addon2" onclick="getAnnounceData(getAnnounceSnapshot(), getCheckData(),1);">
                    <i class="fas fa-search fa-lg"></i></span>
                </div>
              </div>
            </div>
            <div class="d-flex text-white mt-1" style="align-self: flex-start;flex-wrap: wrap;">
                <label class="checkbox-container mx-3">[공지]
                    <input type="checkbox" checked="checked" id="announce" onchange="getAnnounceData(getAnnounceSnapshot(), getCheckData(),1);">
                    <span class="checkmark"></span>
                  </label>
                  <label class="checkbox-container mx-3">[업데이트]
                    <input type="checkbox" checked="checked" id="update" onchange="getAnnounceData(getAnnounceSnapshot(), getCheckData(),1);">
                    <span class="checkmark"></span>
                  </label>
                  <label class="checkbox-container mx-3">[이벤트]
                    <input type="checkbox" checked="checked" id="event" onchange="getAnnounceData(getAnnounceSnapshot(), getCheckData(),1);">
                    <span class="checkmark"></span>
                  </label>
                  <label class="checkbox-container mx-3">[개발현황]
                    <input type="checkbox" checked="checked" id="develop" onchange="getAnnounceData(getAnnounceSnapshot(), getCheckData(),1);">
                    <span class="checkmark"></span>
                  </label>
                  <label class="checkbox-container mx-3">[버그수정]
                    <input type="checkbox" checked="checked" id="debug" onchange="getAnnounceData(getAnnounceSnapshot(), getCheckData(),1);">
                    <span class="checkmark"></span>
                  </label>
            </div>
            <div>

            </div>
            </div>
        </div>
        <div class="container d-flex justify-content-center" style="margin-top: 100px;">
          <div class="col-xl-12" style="width: 100%;max-width: 1280px;">
            <div class="table-responsive text-nowrap" id="content-placeholder">
            </div>
          </div>
          <!--이 부분 모바일 파튼데 모바일 파트도 부탁합니당.-->

        </div>
        <div class="container mt-5 d-flex justify-content-center" id="number-placeholder"></div>
      </div><!--여기까지 tab1-->
      <div
        class="tab-pane fade show"
        id="ex1-tabs-2"
        role="tabpanel"
        aria-labelledby="ex1-tab-2"
      >
      <div class="container-fluid bg-announce d-flex align-items-center announce-height" style="margin-top: 113px;">
        <div class="container col-xl-4 col-lg-6 col-md-8 d-flex justify-content-center align-items-center" style="height: 100%;flex-direction: column;">
            <p class="title mb-5 mt-5">
                도움말
            </p>
            <div class="card mb-2"
          style="border-radius: 10em; width: 100%;">
          <div class="card-body p-2">
           
              <div class="input-group input-group-lg">
                <input type="text" id="searchWord2" class="form-control form-control-lg rounde bg-transparent" style="border: 0px !important;"
                  placeholder="검색어를 입력하세요" aria-label="Type Keywords" aria-describedby="basic-addon2" />
                <span class="input-group-text border-0" id="basic-addon2" onclick="getQuestionData(getQuestionSnapshot());">
                  <i class="fas fa-search fa-lg"></i></span>
                
            </div>
          </div>
        </div>
        
        <div>

        </div>
        </div>
        
    </div>
    <div class="container" style="margin-top: 100px;" id="question-placeholder"></div>
  
      </div>
      <div
        class="tab-pane fade show"
        id="ex1-tabs-3"
        role="tabpanel"
        aria-labelledby="ex1-tab-3"
      >
      <div class="container-fluid bg-announce d-flex align-items-center announce-height" style="margin-top: 113px;">
        <div class="container col-xl-4 col-lg-6 col-md-8 d-flex justify-content-center align-items-center" style="height: 100%;flex-direction: column;">
            <p class="title mb-5 mt-5"><!--여기서 검색하면 도움말에서 검색한걸로 뜬다네-->
                문의사항
            </p>
            <div class="card mb-2"
          style="border-radius: 10em; width: 100%;">
          <div class="card-body p-2">
            <div class="input-group input-group-lg">
              <input type="text" id="searchWord3" class="form-control form-control-lg rounde bg-transparent" style="border: 0px !important;"
                placeholder="검색어를 입력하세요" aria-label="Type Keywords" aria-describedby="basic-addon2" />
              <span class="input-group-text border-0" id="basic-addon2" onclick="getQuestionData2(getQuestionSnapshot());"><i
                  class="fas fa-search fa-lg"></i></span>
            </div>
          </div>
        </div>
        
        <div>

        </div>
        </div>
        
    </div>
      <div class="container" style="margin-top: 100px;">
        <div class="row">
          <div class="col-lg-6" style="padding: 0px 40px;">
            <p class="title" style="color:#060B11">Contact Us</p>
            <div class="d-flex mt-1" style="align-self: flex-start;flex-wrap: wrap;color: #bfbfbf">
              <label class="checkbox-container">질문사항
                  <input type="checkbox"  checked="checked" id="check1">
                  <span class="checkmark" style="border-color: #efefef;"></span>
                </label>
                <label class="checkbox-container mx-3">건의사항
                  <input type="checkbox" id="check2">
                  <span class="checkmark" style="border-color: #efefef;"></span>
                </label>
              
          </div>
          <form style="color: #060B11;">
            <!-- Email input -->
            <p class="font-weight-bold" style="font-size: 14px;">Title</p>
            <input type="text" id="title" class="form-control form-rounded" placeholder="Write the Title" style="padding: 10px 20px;">
          
            <p class="font-weight-bold mt-3" style="font-size: 14px;">MESSAGE</p>
            <textarea name="" id="inquiry" cols="30" rows="8" id="inquiry" placeholder="Your Message"></textarea>
            <p class="font-weight-bold mt-3" style="font-size: 14px;">NAME</p>
            <div class="row">
              <div class="col-8">
                <input type="text" class="form-control form-rounded" id="email" placeholder="Your email" style="padding: 10px 20px;">
              </div>
              <div class="col-4" style="padding: 0px 20px;">
                <button type='button' class="btn-rounded text-white text-center send-button" style="font-size: 18px;height: 100%;background-color: #186aff;" onclick="contact();">Send</button>
              </div>
            </div>
            
           
          </form>
          </div>
          <div class="col-lg-6 mt-lg-0 mt-5" style="padding: 0px 40px;">
            <p class="title" style="color:#060B11">Address</p>
            <p style="color: #bfbfbf;line-height: 40px;font-size: 18px;">
              상담 전화 및 메일 주소는 다음과 같습니다.<br>
              문의사항이 있으시다면 연락주세요.
            </p>
            <div style="font-size: 18px; color: #060B11;">
              <i class="fas fa-phone-alt me-3" style="color: #186aff;"></i>
              010.7518.1590
            </div>
            <div class="mt-3" style="font-size: 18px; color: #060B11;">
              <i class="fas fa-envelope me-3" style="color: #186aff;"></i>
              brianbae6@korea.ac.kr
            </div>
            <div class="mt-3" style="font-size: 18px; color: #060B11;">
              <div class="d-flex">
                <i class="fas fa-home me-3 mt-1" style="color: #186aff;"></i>
                <div>
                  서울특별시 동대문구 안암로 14길<br> (상세주소)
                </div>
              </div>
              
            </div>
            <p style="font-size: 22px; color: #060B11;margin-top: 43px;">We are on Socials</p>
            <div style="color: #bfbfbf;">
              <i class="fab fa-facebook-square me-3" style="color: #186aff;font-size: 18px;"></i>
              Facebook
            </div>
            <div class="mt-3" style="color: #bfbfbf;">
              <i class="fab fa-twitter me-3" style="color: #186aff;font-size: 18px;"></i>
              Twitter
            </div>
            
            <div class="mt-3" style="color: #bfbfbf;">
              <i class="fab fa-instagram me-3" style="color: #186aff;font-size: 18px;"></i>
              instagram
            </div>
          </div>
        </div>
    </div><!--container end-->
    <div class="container-fluid mobile-nopad" style="height: 480px;margin-top: 100px;">
      <div id="map" style="height: 100%;"></div>
    </div>
      </div>
        </div>
    <footer id="footer"></footer>
	<!-- MDB -->
    <script type="text/javascript" src="../js/mdb.min.js"></script>
    
    <!-- Custom scripts -->
    <script type="text/javascript"></script>
	<script src="announce.js"></script>
  <script src="..\js\jquery.accordion.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('.hr-link').click(function(){
        location.href = 'announce_onclick.html';
      });
      $('#only-one [data-accordion]').accordion();

      $('#multiple [data-accordion]').accordion({
        singleOpen: false
      });

      $('#single[data-accordion]').accordion({
        transitionEasing: 'cubic-bezier(0.455, 0.030, 0.515, 0.955)',
        transitionSpeed: 200
      });
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      var firebaseConfig = {
        apiKey: "AIzaSyD6mm7QMMvibd3f-NGgXVPPjJnN30gMWv0",
        authDomain: "shift-enter.firebaseapp.com",
        databaseURL: "https://shift-enter-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "shift-enter",
        storageBucket: "shift-enter.appspot.com",
        messagingSenderId: "485214384329",
        appId: "1:485214384329:web:69d7078e22638707c8dd18",
        measurementId: "G-CQSC9HJMKH"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
      $("#navbar").load('../navbar/beforelogin.html');

      const mobileWidth = '(max-width: 768px)';
      const mediaQuery = window.matchMedia(mobileWidth);
      const divtable = document.getElementById('tablediv');
      if(mediaQuery.matches){
        console.log('now the width is smaller than 768');
        var source   = $("#announce-template-mobile").html();
      var announceTemplate = Handlebars.compile(source);
      }
      else{
        console.log('now the width is larger than 768');
        var source   = $("#announce-template").html();
      var announceTemplate = Handlebars.compile(source);
        
      }
      var source2   = $("#number-template").html();
      var numberTemplate = Handlebars.compile(source2);
      var source3   = $("#question-template").html();
      var questionTemplate = Handlebars.compile(source3);
      const contentNum = 4;
      let collectionName = "announce";
      let pageName = "announce.html";
      let currentPage = 1;
      let maxPage = 1;

      setViewOptions(announceTemplate, numberTemplate, questionTemplate, collectionName, pageName);

      getAnnounceData(getAnnounceSnapshot(), getCheckData(), currentPage);
      getQuestionData(getQuestionSnapshot());
      /*firebase.auth().onAuthStateChanged(function(user) {
          if (user) {
            $("#navbar").load('../navbar/afterlogin.html');
            console.log(user)		// 인증 후 어떤 데이터를 받아오는지 확인해보기 위함.
            //window.history.back();
          } else {
            $("#navbar").load('../navbar/beforelogin.html');
            // No user is signed in.
            //alert("로그인 X");
          }
      });*/
    });
    $(window).load(function(){
      $('#소통').addClass('active');
    });
  </script>
  <script async
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC33JiJfsCheBCOLJbPiMKqf19OxnkKyyE&callback=initMap">
</script>
</body>
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <!--<script src="/__/firebase/8.6.8/firebase-app.js"></script>

  <script src="/__/firebase/8.6.8/firebase-analytics.js"></script>

  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

  <script src="/__/firebase/init.js"></script>

  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>

  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-analytics.js"></script>-->

<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.2.2/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.2.2/firebase-analytics.js"></script>

<script src="https://www.gstatic.com/firebasejs/8.2.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.2/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.2/firebase-database.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.6/handlebars.min.js" integrity="sha512-zT3zHcFYbQwjHdKjCu6OMmETx8fJA9S7E6W7kBeFxultf75OPTYUJigEKX58qgyQMi1m1EgenfjMXlRZG8BXaw==" crossorigin="anonymous"></script>
<script src="../admin/admin_announce.js"></script>
<script src="announce_question.js"></script>

<script id="announce-template" type="text/x-handlebars-template">
    <!--Table-->
    <table class="table table-hover">

      <!--Table head-->
      <thead class="bg-gray">
        <tr>
          <th>분류</th>
          <th>제목</th>
          <th>날짜</th>          
        </tr>
      </thead>
      <!--Table head-->

      <!--Table body-->
      {{#contents}}
          <tr>
              <th scope="row">[{{type}}]</th>
              <td class="hr-link" id="{{title}}" onclick="openDoc(this.id)">{{title}}</td>
              <td>{{created}} </td><!--정렬은 날짜순-->
          </tr>
      {{/contents}}
      <!--Table body-->
    </table>
    <!--Table-->
</script>

<script id="announce-template-mobile" type="text/x-handlebars-template">
    <section id="tablediv"><!--id="tablediv"-->
      <hr>
      {{#contents}}
      <div style="padding: 0px 24px;">
        <div class="list-title">
          [{{type}}]
        </div>
        <div class="list-content hr-link" id="{{title}}" onclick="openDoc(this.id)">
          {{title}}
        </div>
        <hr>
      </div>
      {{/contents}}
    </section>
</script>

<script id="number-template" type="text/x-handlebars-template">
  <nav aria-label="...">
    <ul class="pagination pagination-circle">
      <li class="page-item">
        <a class="page-link" tabindex="-1" aria-disabled="true" onclick="firstPage(getCheckData());">&lt&lt</a>
      </li>
      <li class="page-item">
        <a class="page-link" tabindex="-1" aria-disabled="true" onclick="prevPage(getCheckData());">&lt</a>
      </li>

      {{#contents}}
      <li class="page-item {{#if active}}active{{/if}}">
        <a class="page-link" aria-current="page" id="{{num}}" onclick="getAnnounceData(getAnnounceSnapshot(), getCheckData(), this.id);">{{num}}</a>
      </li>
      {{/contents}}

      <li class="page-item">
        <a class="page-link" onclick="nextPage(getCheckData());">&gt</a>
      </li>
      <li class="page-item">
        <a class="page-link" onclick="lastPage(getCheckData());">&gt&gt</a>
      </li>
    </ul>
  </nav>
</script>

<script id="question-template" type="text/x-handlebars-template">
  <div class="container" style="margin-top: 100px; overflow:auto;">
    {{#contents}}
    <section class="accordion">
      <button class="accordion-title d-flex justify-content-between align-items-center">
        <div class=""><div class="click2edit" id="title{{num}}"></div></div>
          <img class="rotate" src="../img\down.png" alt="">
      </button>
      <div class="accordion-content">
        <article class="article2edit">
          <div class="row">
            <div class="col-10">
              <div class="click2edit" id="content{{num}}"></div>
            </div>
            <div class="col-2 d-flex justify-content-end">
            </div>
          </div>
        </article>
      </div>
    </section>
    {{/contents}}
  </div>
  <div class="d-flex justify-content-center" style="color: #8c8c8c; margin-top: 40px; margin-bottom: 40px;">
  </div>
</script>

<script>

  window.onload = function(){
    var params = new URLSearchParams(location.search);
    if(params.get('tab') == 2){
      tab2(); 
    }
    else if(params.get('tab') == 3){
      tab3();
    }
  }

  function tab2(){
    console.log("tab2");
    $('[href="#ex1-tabs-2"]').tab('show');
  }

  function tab3(){
    console.log("tab3");
    $('[href="#ex1-tabs-3"]').tab('show');
  }

  function getQuestionData2(Snapshots){
    document.getElementById("searchWord2").value = document.getElementById("searchWord3").value;
    getQuestionData(Snapshots);
    $('[href="#ex1-tabs-2"]').tab('show');
  }

  function contact(){
    var db = firebase.firestore();
    var type = "";
    var checked = 0;
    if(document.getElementById('check1').checked){
      checked = 1;
      type = "질문사항";
    }
    else if(document.getElementById('check1').checked){
      checked = 2;
      type = "건의사항";
    }
    //alert("button click "+checked);

    var email = document.getElementById('email').value;
    var title = document.getElementById('title').value;
    var inquiry = document.getElementById('inquiry').value;

    if(title=="" || title==null){
      alert("제목을 입력해주세요");
    }
    else if(type=="" || type==null){
      alert("질문/건의사항에 체크해주세요");
    }
    else if(inquiry=="" || inquiry==null){
      alert("문의사항을 입력해주세요");
    }
    else if(email=="" || email==null){
      alert("이메일을 입력해주세요");
    }
    else{
      db.collection("contact").add({
        type : type,
        title : title,
        email : email,
        inquiry : inquiry
      })
      .then(function(docRef) {
          alert("제출이 완료되었습니다");
          document.getElementById('email').value = "";
          document.getElementById('title').value = "";
          document.getElementById('inquiry').value = "";
      })
      .catch(function(error) {
          console.error("Error adding document: ", error);
      }); 
    }
  }
</script>
</html>